<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Relying Party OIDC PKCE
    </title>
    <meta content="General RP" name="description"/>
    <meta content=" Sandbox Copyright (c) AVOCO SECURE LTD. All rights reserved." name="author"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.15.1/css/uikit.min.css"
          integrity="sha512-M3HETFyP1PXGgLx/iZADOaQXe5nHhzi0cfsQ2fKQgsRDJ+ZequdJNGFQQxlcPyCizSsj89y2dDpMugJHOQ4yfg=="
          referrerpolicy="no-referrer" rel="stylesheet"/>
    <link href="webres/css/json.css" rel="stylesheet"/>
    <script crossorigin="anonymous"
            integrity="sha512-GVPTp+rBd1RLYXT3Mz/sFo7Ioir5KmbyYSAf7ePaYX3lJnnnfonI2aLdpfwAwSq4qPpwLLu8VE6fPvBawLk9Lg=="
            referrerpolicy="no-referrer"
            src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.15.1/js/uikit.min.js"></script>
    <!-- OIDC lib files -->
    <script src="lib/sha256.js">
    </script>
    <script src="lib/oidcrpbase.js">
    </script>
    <!-- OIDC CONFIGURATION FILE  -->
    <script src="oidcrp-configuration/config.js">
    </script>
    <style>
        .uk-button {
            text-transform: none;
            font-weight: bold;
        }

        footer {
            background: black !important;
        }
    </style>
</head>
<body>
<noscript>
    <div class="uk-alert uk-alert-danger uk-alert-large uk-text-large">
        <i class="uk-icon-exclamation-triangle">
        </i> In order to use this website you must enable the JavaScript option in your web browser. Please refer to
        your web browser's help instructions on how to do this.
    </div>
</noscript>
<div class="uk-height-viewport uk-margin-left uk-margin-right">
    <h2 class="uk-text-center">Application For Account
    </h2>
    <h3>To issue an account we must verify your details
    </h3>
    <h3>The fastest way to do this is to sign in to your online bank who will have already verified you.
    </h3>
    <h3>Click Start to select your bank through our trusted partner service.
    </h3>
    <div class="uk-margin-top">
        <!-- START Button  -->
        <button class="uk-button uk-button-primary uk-border-rounded" id="btn_startauth" type="button">Start
        </button>
        <hr class="uk-margin-small-bottom">
        <!-- START Button for imperial bank. Class to set name: idp-name-imperial_bank class for button click idp-btn-startauth -->
        <button class="uk-button uk-button-primary uk-border-rounded idp-name-imperial_bank idp-btn-startauth"
                type="button">imperial_bank
        </button>
    </div>
    <!-- User Attributes returned from OIDC HUB or OIDC IDP -->
    <div class="uk-margin-top" id="divres" style="display:none">
        <form class="uk-form-horizontal uk-margin-small-bottom uk-margin-left" id="formres">
            <h4>Claims
            </h4>
            <div class="uk-margin">
                <label class="uk-form-label" for="userid">ID
                </label>
                <input class="uk-input uk-form-width-large" id="userid" name="userid" readonly type="text"/>
            </div>
            <div class="uk-margin" id="field_name">
                <label class="uk-form-label" for="username">Name
                </label>
                <input class="uk-input uk-form-width-large" id="username" name="username" readonly type="text"/>
            </div>
            <div class="uk-margin" id="field_email">
                <label class="uk-form-label" for="useremail">Email
                </label>
                <input class="uk-input uk-form-width-large" id="useremail" name="useremail" readonly type="text"/>
            </div>
            <div class="uk-margin" id="field_mobile">
                <label class="uk-form-label" for="usermobile">Mobile
                </label>
                <input class="uk-input uk-form-width-large" id="usermobile" name="usermobile" readonly type="text"/>
            </div>
            <div class="uk-margin" id="field_dob">
                <label class="uk-form-label" for="userdob">Date of birth
                </label>
                <input class="uk-input uk-form-width-large" id="userdob" name="userdob" readonly type="text"/>
            </div>
            <div class="uk-margin" id="field_address">
                <label class="uk-form-label" for="useraddress">Address
                </label>
                <input class="uk-input uk-form-width-large" id="useraddress" name="useraddress" readonly type="text"/>
            </div>
        </form>
        <button class="uk-button uk-button-primary uk-border-rounded uk-button-small" id="btn_details"
                type="button" uk-toggle="target: #divdetails">Details...
        </button>
        <br>
    </div>
    <div class="uk-child-width-1-2@m uk-grid-small uk-grid-match" hidden id="divdetails" uk-grid>
        <div>
            <div class="uk-card uk-card-default uk-card-body">
                <h3 class="uk-card-title">ID Token
                </h3>
                <div id="dividtoken">
                </div>
            </div>
        </div>
        <div>
            <div class="uk-card uk-card-default uk-card-body">
                <h3 class="uk-card-title">Attributes
                </h3>
                <div id="divattr">
                </div>
            </div>
        </div>
    </div>
    <footer class="footer-container uk-margin-top uk-padding uk-padding-remove-horizontal">
        <div class="uk-margin-left uk-margin-right uk-light">
            Avoco Identity Sandbox v1.3 2021. Configuration press keys: <kbd>c</kbd> + <kbd>f</kbd> + <kbd>g</kbd>
        </div>
    </footer>
</div>
<!-- END User Attributes returned from OIDC HUB or OIDC IDP -->
<!-- Cookie based Configuration for Relying Party Testing. Hold keys cfg to open menu -->
<div id="dlg_config" uk-modal="bg-close: false;">
    <div class="uk-modal-dialog uk-modal-body">
        <button class="uk-modal-close-default" type="button" uk-close>
        </button>
        <h2 class="uk-modal-title">Configuration
        </h2>
        <form class="uk-form-stacked" id="form-config">
          <span class="uk-text-bold">Endpoints and credentials&nbsp;&nbsp;&nbsp;
            <button class="uk-button uk-button-default uk-button-small" type="button" uk-toggle="target: #divconfig">...
            </button>
          </span>
            <div class="uk-margin-left uk-box-shadow-small" hidden id="divconfig">
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="provissuer">Token Issuer*
                    </label>
                    <input class="uk-input uk-form-width-large" id="provissuer" maxlength="128" name="provissuer"
                           placeholder="Token issuer URI" required type="url" value=""/>
                </div>
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="authnurl">Authentication URL*
                    </label>
                    <input class="uk-input uk-form-width-large" id="authnurl" maxlength="128" name="baseurl"
                           placeholder="Authentication endpoint" required type="url" value=""/>
                </div>
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="tokenurl">Token endpoint*
                    </label>
                    <input class="uk-input uk-form-width-large" id="tokenurl" maxlength="128" name="tokenurl"
                           placeholder="JWKS endpoint" required type="url" value=""/>
                </div>
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="profileurl">Profile endpoint*
                    </label>
                    <input class="uk-input uk-form-width-large" id="profileurl" maxlength="128" name="profileurl"
                           placeholder="Profile endpoint" required type="url" value=""/>
                </div>
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="jwksurl">Provider JWKS endpoint*
                    </label>
                    <input class="uk-input uk-form-width-large" id="jwksurl" maxlength="128" name="jwksurl"
                           placeholder="JWKS endpoint" required type="url" value=""/>
                </div>
                <div class="uk-form-controls">
                    <label class="uk-form-label" for="oauth_clientid">Client ID*
                    </label>
                    <input class="uk-input uk-form-width-large" id="oauth_clientid" maxlength="128"
                           name="oauth_clientid"
                           placeholder="OAuth client ID" required type="text" value=""/>
                </div>
            </div>
            <hr class="uk-margin-small-bottom">
            <p class="uk-text-bold uk-margin-remove-top">OAuth2/ OIDC options
            </p>
            <div class="uk-form-controls uk-margin-bottom">
                <label class="uk-form-label" for="idp_hint">Preferred Provider
                </label>
                <input class="uk-input uk-form-width-large" id="idp_hint" maxlength="128" name="idp_hint" type="text"
                       value=""/>
                <p class="uk-text-muted hint uk-margin-remove-top uk-margin-small-bottom uk-margin-left">
                    One or more Providers from the Hub settings in Desk. Separate multiple Providers with a space. Leave
                    blank for all Providers.
                </p>
            </div>
            <hr>
            <div class="uk-form-controls uk-margin-bottom">
                <label for="useoauth2"></label><input class="uk-checkbox" id="useoauth2" name="useoauth2"
                                                      type="checkbox"/>
                <label>Use OAuth2 in place of OIDC
                </label>
            </div>
            <div class="uk-form_controls uk-margin-bottom">
                <label class="uk-form-label" for="request_mode">OIDC/OAuth2 Flow
                </label>
                <select class="uk-form-width-large uk-select" id="request_mode" name="request_mode" required>
                    <option value="basic">Basic
                    </option>
                    <option value="implicit">Implicit
                    </option>
                    <option value="pkce">PKCE
                    </option>
                    <option value="device">Device
                    </option>
                    <option value="ciba">CIBA MODRNA
                    </option>
                </select>
                <label class="uk-form-label" for="response_mode">Response mode
                </label>
                <select class="uk-form-width-large uk-select" id="response_mode" name="response_mode">
                    <option value="">Default
                    </option>
                    <option value="fragment">Fragment (URL hash)
                    </option>
                    <option value="query">Query string
                    </option>
                    <option value="form_post">Form Post (server to server only)
                    </option>
                    <option value="query.jwt">Query string JWT
                    </option>
                    <option value="fragment.jwt">Fragment JWT
                    </option>
                    <option value="form_post.jwt">Form POST JWT
                    </option>
                    <option value="jwt">Default JWT (query string)
                    </option>
                    <option value="web_message">Web message
                    </option>
                </select>
                <label class="uk-form-label" for="window_type">Hub window type
                </label>
                <select class="uk-form-width-large uk-select" id="window_type" name="window_type">
                    <option value="_default">browser default
                    </option>
                    <option value="_tab">new tab
                    </option>
                    <option value="_blank">Blank small
                    </option>
                    <option value="_self">Redirect
                    </option>
                    <option value="_blank_m">Blank medium
                    </option>
                    <option value="_blank_l">Blank large
                    </option>
                </select>
            </div>
            <div class="uk-form-controls uk-margin-bottom">
                <label class="uk-form-label" for="oauth_scope">Scopes*
                    <span class="uk-text-muted hint"> (space delimited)
              </span>
                </label>
                <input class="uk-input uk-form-width-large" id="oauth_scope" maxlength="128" name="oauth_scope"
                       placeholder="e.g. profile email" required type="text" value=""/>
            </div>
            <hr>
            <div class="uk-form-controls uk-margin-bottom uk-margin-top">
                <label class="uk-form-label">Form fields to display
                </label>
                <label for="form_name"></label><input class="uk-checkbox" id="form_name" name="form_name"
                                                      type="checkbox"/>
                <label>Name
                </label>
                <label for="form_email"></label><input class="uk-checkbox" id="form_email" name="form_email"
                                                       type="checkbox"/>
                <label>Email
                </label>
                <label for="form_mobile"></label><input class="uk-checkbox" id="form_mobile" name="form_mobile"
                                                        type="checkbox"/>
                <label>Mobile
                </label>
                <label for="form_dob"></label><input class="uk-checkbox" id="form_dob" name="form_dob" type="checkbox"/>
                <label>Date of birth
                </label>
                <label for="form_address"></label><input class="uk-checkbox" id="form_address" name="form_address"
                                                         type="checkbox"/>
                <label>Home address
                </label>
            </div>
            <hr>
            <div class="uk-form-controls uk-margin-bottom uk-margin-top">
                <button class="uk-button uk-button-primary uk-width-1-1 uk-border-rounded" id="btn_persistcookie"
                        type="button">Persist configuration (cookie)
                </button>
                <br>
                <br>
                <button class="uk-button uk-button-primary uk-width-1-1 uk-border-rounded" id="btn_persistjson"
                        type="button">Download this configuration (JSON file)
                </button>
            </div>
        </form>
    </div>
</div>
</body>
</html>